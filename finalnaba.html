<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PhilSCA Schedule</title>
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#FCD116"> <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="icon.png">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      /* PhilSCA Colors (Blue, Yellow, White) */
      --philsca-blue: #0038A8; /* Royal Azure - Main Blue */
      --philsca-yellow: #FCD116; /* Metallic Yellow - Main Yellow */
      --philsca-white: #FFFFFF; /* White */
      --philsca-red-accent: #CE1126; /* Philippine Red - For accents if needed */

      --text-dark: #333;
      --text-light: #fdfdfd;
      --background-light: #fdfdfd;
      --card-background: #fff;
      --shadow-light: rgba(0,0,0,0.08);
      --border-radius-card: 12px;
      --border-radius-item: 8px;

      /* Logo specific sizes */
      --logo-height-desktop: 180px; /* Even bigger logo size - ADJUSTED */
      --logo-height-mobile: 130px; /* Even bigger mobile logo size - ADJUSTED */

      /* Top bar height will dynamically adjust, but minimum space needed */
      --top-bar-min-height-desktop: 200px; /* Min height for logo + disclaimer - ADJUSTED */
      --top-bar-min-height-mobile: 160px; /* Min height for mobile - ADJUSTED */

      /* Bottom bar height */
      --bottom-bar-height-desktop: 60px;
      --bottom-bar-height-mobile: 50px;

      /* Global transitions */
      --transition-speed-fast: 0.2s;
      --transition-speed-normal: 0.3s;
      --transition-speed-slow: 0.4s;
      --transition-ease: ease-in-out;
    }

    /* Scroll progress bar */
    #progressBar {
      position: fixed;
      top: 0;
      left: 0;
      width: 0%;
      height: 6px; /* Thinner progress bar */
      background: linear-gradient(to right, var(--philsca-yellow), var(--philsca-red-accent));
      z-index: 1001; /* Above everything else */
      transition: width var(--transition-speed-fast) linear; /* Smoother update */
    }

    body {
      font-family: 'Roboto', sans-serif;
      /* Background Image & Overlay */
      background: var(--background-light); /* Fallback solid color */
      background-image: url('site_background.png'), radial-gradient(circle at top left, rgba(0, 56, 168, 0.05) 1px, transparent 1px),
                        radial-gradient(circle at bottom right, rgba(252, 209, 22, 0.05) 1px, transparent 1px);
      background-blend-mode: overlay, normal, normal; /* Blend the image with the radial gradients */
      background-size: cover, 20px 20px, 20px 20px; /* Cover the whole background, keep dot pattern size */
      background-attachment: fixed; /* Makes the background fixed while content scrolls */

      margin: 0;
      padding: 20px;
      /* Adjusted top padding to clear the bigger logo and disclaimer - ADJUSTED */
      padding-top: calc(var(--top-bar-min-height-desktop) - 50px); /* Further reduced padding to bring h1 closer */
      /* Adjusted bottom padding to clear the new bottom bar */
      padding-bottom: calc(var(--bottom-bar-height-desktop) + 20px);
      color: var(--text-dark);
      line-height: 1.6;
      position: relative;
    }

    /* Add a semi-transparent overlay on the content area to make text readable */
    .container, .compact-table-container {
        background-color: rgba(255, 255, 255, 0.7); /* White with 70% opacity - ADJUSTED */
        position: relative; /* Needed for z-index if applying more effects */
        z-index: 1; /* Place above the body's background */
        box-shadow: 0 6px 20px var(--shadow-light); /* Apply shadow directly here for consistency */
        border-radius: var(--border-radius-card); /* Apply border-radius here for consistency */
        overflow: hidden; /* Ensures content stays within rounded corners */
    }

    /* Adjust margins for content containers */
    .container, .compact-table-container {
        margin: 20px auto;
        max-width: 1200px;
    }


    h1 {
      text-align: center; /* Keep centered as in the image */
      margin-top: 0; /* Managed by body padding-top */
      margin-bottom: 30px;
      color: var(--philsca-blue);
      font-weight: 700;
      letter-spacing: 0.5px;
      line-height: 1.2;
    }

    .container {
      display: grid;
      grid-template-columns: 1fr; /* Default to one column */
      gap: 20px;
      transition: opacity var(--transition-speed-normal) var(--transition-ease); /* For hiding/showing */
    }

    /* Styles for the daily schedule dropdowns */
    details.day {
      background: var(--card-background); /* Keep for internal content background */
      display: flex;
      flex-direction: column;
      transition: transform var(--transition-speed-normal) var(--transition-ease),
                  box-shadow var(--transition-speed-normal) var(--transition-ease),
                  border var(--transition-speed-normal) var(--transition-ease);
      cursor: pointer;
      overflow: hidden;
      border: 1px solid transparent; /* Keep for current day highlight */
      position: relative;
    }

    details.day:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
    }

    details.day.current-day {
      border: 3px solid var(--philsca-yellow);
      box-shadow: 0 8px 25px rgba(252, 209, 22, 0.4);
      animation: pulseBorder 1.5s infinite alternate;
    }

    @keyframes pulseBorder {
      from { border-color: var(--philsca-yellow); }
      to { border-color: var(--philsca-blue); }
    }

    details.day summary {
      font-size: 1.4rem;
      border-left: 6px solid var(--philsca-blue);
      padding: 20px;
      color: var(--philsca-blue);
      font-weight: 600;
      list-style: none;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(to right, #f8fbff, var(--card-background));
      transition: background-color var(--transition-speed-fast) var(--transition-ease), border-bottom var(--transition-speed-normal) var(--transition-ease);
      position: relative;
      z-index: 1;
    }

    details.day summary:hover {
        background-color: #eaf4ff; /* Slight hover effect on summary */
    }

    details.day[open] summary {
        background: linear-gradient(to right, #eaf4ff, #f0f8ff);
        border-bottom: 1px solid #e0e0e0;
    }

    details.day summary::-webkit-details-marker {
      display: none;
    }
    details.day summary::marker {
      display: none;
    }

    details.day summary::after {
      content: '▼'; /* Down arrow for closed, will rotate */
      font-size: 1.5em;
      color: var(--philsca-blue);
      margin-left: 10px;
      transition: transform var(--transition-speed-normal) var(--transition-ease); /* Smooth rotation */
      font-family: 'Times New Roman', serif;
      line-height: 1;
      transform: rotate(-90deg); /* Initial state: pointing right */
    }

    details.day[open] summary::after {
      transform: rotate(0deg); /* When open: pointing down */
    }

    /* Content wrapper for smooth transition */
    .schedule-content {
      padding: 0 20px 20px 20px;
      display: grid;
      grid-template-rows: 0fr; /* Start with 0 height */
      opacity: 0;
      visibility: hidden;
      transition: grid-template-rows var(--transition-speed-slow) var(--transition-ease),
                  opacity var(--transition-speed-normal) var(--transition-ease) 0.1s,
                  visibility var(--transition-speed-slow) var(--transition-ease);
    }

    details.day[open] .schedule-content {
      grid-template-rows: 1fr; /* Expand to content height */
      opacity: 1;
      visibility: visible;
      transition: grid-template-rows var(--transition-speed-slow) var(--transition-ease),
                  opacity var(--transition-speed-normal) var(--transition-ease) 0.2s,
                  visibility var(--transition-speed-slow) var(--transition-ease);
    }

    .schedule-content > div {
      overflow: hidden; /* Ensures content stays within the grid row */
      min-height: 0; /* Important for grid-template-rows to collapse properly */
    }

    .class {
      margin: 10px 0;
      padding: 12px 18px;
      border-radius: var(--border-radius-item);
      background-color: #f8fbff;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      border: 1px solid #e6f0f7;
      transition: background-color var(--transition-speed-fast) var(--transition-ease),
                  transform var(--transition-speed-fast) var(--transition-ease),
                  box-shadow var(--transition-speed-fast) var(--transition-ease);
      cursor: pointer;
      position: relative;
      overflow: hidden; /* For inner elements */
    }

    .class:hover {
      background-color: #edf5fc;
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    .class span {
      display: block;
    }

    .subject {
      font-weight: 600;
      color: var(--philsca-blue);
      font-size: 1.05rem;
    }

    .time, .room {
      font-size: 0.9em;
      color: #666;
      margin-top: 2px;
    }

    .instructor {
      font-size: 0.85em;
      color: #888;
      margin-top: 5px;
      max-height: 0; /* Initial hidden state */
      overflow: hidden;
      opacity: 0;
      transition: max-height var(--transition-speed-normal) var(--transition-ease), opacity var(--transition-speed-normal) var(--transition-ease);
    }

    .class.expanded .instructor {
      max-height: 50px; /* A height larger than content to ensure it shows */
      opacity: 1;
    }

    .tag {
      padding: 5px 10px;
      font-size: 0.75em;
      border-radius: 5px;
      font-weight: 500;
      margin-top: 5px;
      min-width: 60px;
      text-align: center;
      white-space: nowrap; /* Prevent tag text from wrapping */
    }

    /* Dynamic Tag Colors - Adjusted for PhilSCA theme */
    .tag-ait { background: #E0F7FA; color: #00796B; } /* Adjusted to a bluish-green */
    .tag-gec { background: #FFFDE7; color: #F57C00; } /* Adjusted to an orangish-yellow */
    .tag-it { background: #E3F2FD; color: #1976D2; } /* Adjusted to a sky blue */
    .tag-pe { background: #E8F5E9; color: #388E3C; } /* Adjusted to a leafy green */
    .tag-nstp { background: #FCE4EC; color: #D81B60; } /* Adjusted to a reddish-pink */
    .tag.no-class { background: #e0e0e0; color: #757575; }

    /* Fixed Navigation Bar (Top) - for logo and disclaimer */
    .fixed-nav-bar.top {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background-color: transparent; /* Allows background image to show */
      display: flex;
      justify-content: space-between; /* Logo left, disclaimer right */
      align-items: flex-start; /* Vertically align items to the start - ADJUSTED */
      z-index: 1000;
      padding: 20px 20px; /* More padding from edges - ADJUSTED */
      box-sizing: border-box; /* Include padding in width */
      min-height: var(--top-bar-min-height-desktop); /* Ensure enough space - ADJUSTED */
    }

    .nav-content.top-logo-link {
      display: flex;
      align-items: flex-start; /* Align logo to the start - ADJUSTED */
      justify-content: flex-start; /* Align logo to the start */
      height: var(--logo-height-desktop); /* Use defined logo height - ADJUSTED */
      width: auto;
      text-decoration: none;
      flex-shrink: 0; /* Prevent logo from shrinking */
    }

    .nav-logo {
      height: 100%; /* Fill the height of its container */
      width: auto;
      display: block;
      transition: transform var(--transition-speed-fast) var(--transition-ease);
      object-fit: contain; /* Ensure the whole logo is visible */
    }

    .nav-content.top-logo-link:hover .nav-logo {
      transform: scale(1.05); /* Only scale on hover */
    }

    /* Disclaimer Box (Top) */
    .disclaimer-box {
        background-color: var(--philsca-yellow);
        color: var(--philsca-blue); /* Text color for disclaimer on yellow background */
        border-radius: var(--border-radius-card); /* Rounded corners */
        padding: 15px 20px; /* Ample padding */
        font-size: 0.9em;
        line-height: 1.4;
        max-width: none; /* REMOVED max-width to allow it to be a long rectangle - ADJUSTED */
        width: auto; /* Allow width to be determined by content or flex-grow - ADJUSTED */
        box-shadow: 0 4px 10px rgba(0,0,0,0.1); /* Subtle shadow for depth */
        text-align: center;
        margin-left: 20px; /* Space from the logo */
        flex-grow: 1; /* Allow it to grow and take available space - ADJUSTED */
        flex-shrink: 1; /* Allow it to shrink */
        align-self: flex-start; /* Align to the top of the flex container - ADJUSTED */
    }
    .disclaimer-box span {
        display: block; /* Ensure text wraps if needed */
    }

    /* Fixed Navigation Bar (Bottom) - for compact button only */
    .fixed-nav-bar.bottom {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: var(--bottom-bar-height-desktop);
      background-color: var(--philsca-blue); /* Use PhilSCA blue for bottom bar */
      box-shadow: 0 -4px 15px rgba(0,0,0,0.2);
      display: flex;
      justify-content: center; /* Center the button */
      align-items: center;
      z-index: 1000;
      padding: 0 20px; /* Padding from edges */
      box-sizing: border-box;
    }

    /* Layout Toggle Button - positioned within the bottom bar */
    .layout-toggle-btn {
        background-color: var(--philsca-yellow);
        color: var(--philsca-blue);
        border: none;
        padding: 10px 20px; /* Increased padding for button */
        border-radius: 8px; /* Slightly more rounded button */
        font-weight: 500;
        cursor: pointer;
        font-size: 1em; /* Slightly larger font */
        transition: background-color var(--transition-speed-fast) var(--transition-ease),
                    transform var(--transition-speed-fast) var(--transition-ease),
                    box-shadow var(--transition-speed-fast) var(--transition-ease);
        display: flex;
        align-items: center;
        gap: 8px; /* More space between icon and text */
    }

    .layout-toggle-btn:hover {
        background-color: #e0b000; /* A slightly darker yellow */
        transform: scale(1.02); /* Slight scale on hover */
        box-shadow: 0 3px 8px rgba(0,0,0,0.3);
    }

    .layout-toggle-btn svg {
        width: 20px; /* Larger icon */
        height: 20px;
        fill: currentColor; /* Inherit color from text */
    }

    /* Compact Table Styles */
    .compact-table-container {
        overflow-x: auto; /* Enable horizontal scrolling on small screens */
        display: none; /* Hidden by default */
        opacity: 0;
        transition: opacity var(--transition-speed-normal) var(--transition-ease);
    }

    body.compact-view .compact-table-container {
        display: block; /* Show when in compact view */
        opacity: 1;
    }

    .compact-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.9em;
        min-width: 700px; /* Ensure table is wide enough for content */
        background-color: var(--card-background); /* Ensure table background is white */
        border-radius: var(--border-radius-card); /* Inherit from container */
        overflow: hidden; /* For rounded corners */
        box-shadow: 0 4px 15px rgba(0,0,0,0.08); /* Subtle shadow for table */
    }

    .compact-table th,
    .compact-table td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid #eee; /* Light border for rows */
        border-left: 1px solid #f5f5f5; /* Very light vertical borders for cells */
        border-right: 1px solid #f5f5f5;
    }
    .compact-table th:first-child, .compact-table td:first-child {
        border-left: none; /* No left border on first column */
    }
    .compact-table th:last-child, .compact-table td:last-child {
        border-right: none; /* No right border on last column */
    }


    .compact-table th {
        background-color: var(--philsca-blue);
        color: var(--text-light);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        position: sticky; /* Make headers sticky for horizontal scroll */
        top: 0;
    }
    .compact-table th:first-child {
        border-top-left-radius: var(--border-radius-card); /* Rounded corners for top-left header */
    }
    .compact-table th:last-child {
        border-top-right-radius: var(--border-radius-card); /* Rounded corners for top-right header */
    }


    .compact-table tbody tr {
        transition: background-color var(--transition-speed-fast) var(--transition-ease);
    }

    .compact-table tbody tr:hover {
        background-color: #f0f8ff; /* Lighter hover effect */
    }

    .compact-table .table-day {
        font-weight: 700;
        color: var(--philsca-blue);
        white-space: nowrap; /* Prevent day names from wrapping */
    }

    .compact-table .table-subject {
        font-weight: 500;
    }

    .compact-table .table-tag {
        font-size: 0.7em;
        padding: 3px 8px;
        border-radius: 4px;
        white-space: nowrap;
    }

    .compact-table .no-class-row td {
        background-color: #fdfdfd; /* Lighter background for no-class rows */
        color: #757575;
        font-style: italic;
        text-align: center;
    }
    .compact-table .no-class-row .table-tag {
        background: #e0e0e0;
        color: #757575;
    }

    /* Horizontal rows for days in compact view */
    .compact-table tbody tr td {
        border-top: none; /* Reset default top border */
    }

    .compact-table tbody tr.first-class-of-day td {
        border-top: 2px solid var(--philsca-yellow); /* Distinct border for start of each day */
    }

    .compact-table tbody tr.first-class-of-day.no-class-row td {
        border-top: 2px solid #ccc; /* Slightly different for no-class rows */
    }

    /* ---------- Mobile View Adjustment ---------- */
    @media (max-width: 768px) {
      body {
        padding: 15px;
        /* Adjusted top padding for mobile logo and disclaimer - ADJUSTED */
        padding-top: calc(var(--top-bar-min-height-mobile) - 40px); /* Further reduced padding for mobile */
        /* Adjusted bottom padding for mobile bottom bar */
        padding-bottom: calc(var(--bottom-bar-height-mobile) + 15px);
      }

      h1 {
        font-size: 1.8rem;
        margin-bottom: 25px;
      }

      .container {
        grid-template-columns: 1fr; /* Force single column on mobile */
        gap: 15px;
      }

      details.day summary {
        font-size: 1.3rem;
        padding: 15px;
        border-left: 5px solid var(--philsca-blue);
      }
      .schedule-content {
        padding: 0 15px 15px 15px;
      }

      .class {
        flex-direction: column;
        align-items: flex-start;
        gap: 5px;
        padding: 10px 15px;
      }

      .tag {
        align-self: flex-end;
        margin-top: 8px;
        min-width: unset;
      }

      /* Mobile Top Bar - ADJUSTED */
      .fixed-nav-bar.top {
        padding: 15px 15px; /* Adjust padding for mobile */
        min-height: var(--top-bar-min-height-mobile); /* Uses adjusted variable */
        flex-direction: column; /* Stack logo and disclaimer vertically */
        align-items: center; /* Center contents for mobile stacking */
      }

      .nav-content.top-logo-link {
        height: var(--logo-height-mobile); /* Uses adjusted variable */
        margin-bottom: 10px; /* Space between logo and disclaimer */
        align-self: center; /* Center logo when stacked */
      }

      .disclaimer-box {
        font-size: 0.8em; /* Smaller disclaimer text on mobile */
        padding: 10px 15px;
        margin-left: 0; /* Remove left margin on mobile */
        max-width: 90%; /* On mobile, let it take up almost full width, but not 100% due to body padding */
        align-self: center; /* Center disclaimer when stacked */
        text-align: center; /* Center disclaimer text on mobile */
      }

      /* Mobile Bottom Bar */
      .fixed-nav-bar.bottom {
        height: var(--bottom-bar-height-mobile);
        padding: 0 15px;
      }

      .layout-toggle-btn {
          padding: 8px 15px;
          font-size: 0.9em;
          gap: 6px;
      }

      .layout-toggle-btn svg {
          width: 18px;
          height: 18px;
      }

      .compact-table {
          min-width: 500px; /* Adjust for smaller mobile width */
      }
      .compact-table th, .compact-table td {
          padding: 8px 10px; /* Smaller padding for mobile table */
      }
    }

    /* Print Stylesheet */
    @media print {
      body {
        background: #fff;
        color: #000;
        padding: 0;
        margin: 0;
        font-size: 12pt;
        background-image: none; /* No background pattern on print */
      }

      h1 {
        color: #000;
        margin-bottom: 20px;
      }

      .container {
        display: none; /* Hide standard view when printing */
      }

      .compact-table-container {
        display: block !important; /* Always show compact table for print */
        box-shadow: none;
        border-radius: 0;
        margin: 0;
        opacity: 1 !important;
      }

      .compact-table {
        min-width: auto;
      }

      .compact-table th, .compact-table td {
        border-color: #ccc;
        padding: 10px;
      }

      .compact-table th {
        background-color: #eee;
        color: #000;
      }

      .compact-table .table-day {
        color: #000;
      }

      .fixed-nav-bar,
      script,
      #progressBar,
      .layout-toggle-btn {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <div id="progressBar"></div>

  <div class="fixed-nav-bar top">
    <a href="#" class="nav-content top-logo-link" aria-label="Scroll to Top">
      <img src="philsca_logo.png" alt="PhilSCA Logo" class="nav-logo">
    </a>
    <div class="disclaimer-box">
        <span>ℹ️ This unofficial application/website is independently run and not affiliated with or endorsed by the Philippine State College of Aeronautics or its associated departments. While intended to be helpful, the accuracy of its data cannot be guaranteed.</span>
    </div>
  </div>

  <h1>BSIT-AIT 1-2 Schedule<br>1st Semester<br>A.Y. [Current Year]–[Next Year]</h1>

  <div class="container" id="expanded-view-container">
    </div>

  <div class="compact-table-container" id="compact-view-container">
    </div>

  <div class="fixed-nav-bar bottom">
    <button id="layoutToggle" class="layout-toggle-btn" aria-label="Toggle Layout View">
        <svg viewBox="0 0 24 24">
            <path d="M2 13h20v-2H2v2zm0 4h20v-2H2v2zm0-8h20V7H2v2zm0-4h20V3H2v2z"/>
        </svg>
        <span class="button-text">Compact View</span>
    </button>
  </div>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
        .then(reg => console.log('Service Worker registered!', reg))
        .catch(err => console.error('Service Worker failed:', err));
    }

    const scheduleData = {
      "monday": [
        { subject: "PATHFIT-1 Physical Education 1", time: "09:00 AM – 11:00 AM", room: "Covered Court", instructor: "N/A", tag: "PE 1", tagClass: "tag-pe" },
        { subject: "IT 111 Introduction to Computing", time: "11:30 AM – 12:30 PM", room: "110 B", instructor: "Vista Mary Ann Aballiar", tag: "IT 111", tagClass: "tag-it" },
        { subject: "IT 112 Computer Programming 1 (Java)", time: "12:30 PM – 01:30 PM", room: "110 B", instructor: "Antonio Erickson Aringo", tag: "IT 112", tagClass: "tag-it" },
        { subject: "IT 112 Computer Programming 1 (Java)", time: "01:30 PM – 04:30 PM", room: "COMP LAB 4", instructor: "Antonio Erickson Aringo", tag: "IT 112 Lab", tagClass: "tag-it" },
        { subject: "IT 113 Web Development (HTML 5 & CSS 3)", time: "03:00 PM – 04:00 PM", room: "110 B", instructor: "Peralta Richard Niel B", tag: "IT 113", tagClass: "tag-it" },
        { subject: "AIT 111 Aviation Fundamentals", time: "04:00 PM – 05:00 PM", room: "110 B", instructor: "Agustin Alan Lino Silverio Jimeno", tag: "AIT 111", tagClass: "tag-ait" }
      ],
      "tuesday": [
        { subject: "IT 111 Introduction to Computing", time: "11:30 AM – 12:30 PM", room: "110 B", instructor: "Vista Mary Ann Aballiar", tag: "IT 111", tagClass: "tag-it" },
        { subject: "GEC 1 Art Appreciation", time: "12:30 PM – 02:00 PM", room: "110 B", instructor: "N/A", tag: "GEC 1", tagClass: "tag-gec" },
        { subject: "GEC 2 Reading in the Philippine History", time: "02:00 PM – 03:30 PM", room: "110 B", instructor: "N/A", tag: "GEC 2", tagClass: "tag-gec" },
        { subject: "GEC 5 Understanding the Self", time: "03:30 PM – 05:00 PM", room: "110 B", instructor: "N/A", tag: "GEC 5", tagClass: "tag-gec" }
      ],
      "wednesday": [
        { subject: "IT 111 Introduction to Computing (Lab)", time: "10:00 AM – 11:30 AM", room: "COMP LAB 2", instructor: "Vista Mary Ann Aballiar", tag: "IT 111 Lab", tagClass: "tag-it" },
        { subject: "IT 112 Computer Programming 1 (Java)", time: "12:30 PM – 01:30 PM", room: "110 B", instructor: "Antonio Erickson Aringo", tag: "IT 112", tagClass: "tag-it" },
        { subject: "IT 113 Web Development (HTML 5 & CSS 3) (Lab)", time: "01:30 PM – 03:00 PM", room: "COMP LAB 1", instructor: "Peralta Richard Niel B", tag: "IT 113 Lab", tagClass: "tag-it" },
        { subject: "AIT 111 Aviation Fundamentals", time: "04:00 PM – 05:00 PM", room: "110 B", instructor: "Agustin Alan Lino Silverio Jimeno", tag: "AIT 111", tagClass: "tag-ait" }
      ],
      "thursday": [
        { subject: "GEC 1 Art Appreciation", time: "12:30 PM – 02:00 PM", room: "110 B", instructor: "N/A", tag: "GEC 1", tagClass: "tag-gec" },
        { subject: "GEC 2 Reading in the Philippine History", time: "02:00 PM – 03:30 PM", room: "110 B", instructor: "N/A", tag: "GEC 2", tagClass: "tag-gec" },
        { subject: "GEC 5 Understanding the Self", time: "03:30 PM – 05:00 PM", room: "110 B", instructor: "N/A", tag: "GEC 5", tagClass: "tag-gec" }
      ],
      "friday": [
        { subject: "IT 112 Computer Programming 1 (Java) (Lab)", time: "01:30 PM – 04:30 PM", room: "COMP LAB 4", instructor: "Antonio Erickson Aringo", tag: "IT 112 Lab", tagClass: "tag-it" }
      ],
      "saturday": [
        { subject: "No Classes Scheduled", time: "Enjoy your break!", room: "N/A", instructor: "", tag: "Free Day", tagClass: "no-class" }
      ],
      "sunday": [
        { subject: "NSTP 1 CWTS/ROTC", time: "08:00 AM – 12:00 PM", room: "Covered Court", instructor: "N/A", tag: "NSTP", tagClass: "tag-nstp" }
      ]
    };

    const daysOfWeek = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];

    // Function to render the expanded (details) view
    function renderExpandedView() {
      const container = document.getElementById('expanded-view-container');
      container.innerHTML = ''; // Clear previous content

      for (const dayId of daysOfWeek) {
        const dayClasses = scheduleData[dayId];
        const detailsElement = document.createElement('details');
        detailsElement.classList.add('day');
        detailsElement.id = dayId;

        const summaryElement = document.createElement('summary');
        summaryElement.textContent = dayId.charAt(0).toUpperCase() + dayId.slice(1);
        detailsElement.appendChild(summaryElement);

        const scheduleContentDiv = document.createElement('div');
        scheduleContentDiv.classList.add('schedule-content');
        const innerDiv = document.createElement('div'); // Wrapper for overflow hidden

        if (dayClasses.length === 0 || (dayClasses.length === 1 && dayClasses[0].tagClass === 'no-class')) {
            const classDiv = document.createElement('div');
            classDiv.classList.add('class', 'no-class');
            classDiv.innerHTML = `
                <div>
                    <span class="subject">No Classes Scheduled</span>
                    <span class="time">${dayClasses.length > 0 ? dayClasses[0].time : 'Enjoy your day!'}</span>
                    <span class="room">${dayClasses.length > 0 ? dayClasses[0].room : 'N/A'}</span>
                    <span class="instructor"></span>
                </div>
                <span class="tag no-class">Free Day</span>
            `;
            innerDiv.appendChild(classDiv);
        } else {
            dayClasses.forEach(classInfo => {
                const classDiv = document.createElement('div');
                classDiv.classList.add('class');
                classDiv.setAttribute('data-details', classInfo.instructor);

                classDiv.innerHTML = `
                    <div>
                        <span class="subject">${classInfo.subject}</span>
                        <span class="time">${classInfo.time}</span>
                        <span class="room">${classInfo.room}</span>
                        <span class="instructor">Instructor: ${classInfo.instructor || 'N/A'}</span>
                    </div>
                    <span class="tag ${classInfo.tagClass}">${classInfo.tag}</span>
                `;
                innerDiv.appendChild(classDiv);
            });
        }


        scheduleContentDiv.appendChild(innerDiv);
        detailsElement.appendChild(scheduleContentDiv);
        container.appendChild(detailsElement);
      }

      // Re-attach event listeners for newly created elements
      attachExpandedViewListeners();
    }

    function attachExpandedViewListeners() {
        document.querySelectorAll('.class').forEach(classBlock => {
            classBlock.addEventListener('click', (event) => {
                event.stopPropagation();
                if (!classBlock.classList.contains('no-class')) {
                    classBlock.classList.toggle('expanded');
                }
            });
        });

        // Close other open details when one is opened
        document.querySelectorAll('details.day').forEach(dayDetails => {
            dayDetails.addEventListener('toggle', (event) => {
                if (dayDetails.open) {
                    document.querySelectorAll('details.day').forEach(otherDayDetails => {
                        if (otherDayDetails !== dayDetails && otherDayDetails.open) {
                            otherDayDetails.removeAttribute('open');
                        }
                    });
                }
            });
        });
    }

    // Function to render the compact (table) view
    function renderCompactView() {
      const compactContainer = document.getElementById('compact-view-container');
      compactContainer.innerHTML = ''; // Clear previous content

      const table = document.createElement('table');
      table.classList.add('compact-table');

      const thead = document.createElement('thead');
      thead.innerHTML = `
        <tr>
          <th>Day</th>
          <th>Subject</th>
          <th>Time</th>
          <th>Room</th>
          <th>Instructor</th>
          <th>Type</th>
        </tr>
      `;
      table.appendChild(thead);

      const tbody = document.createElement('tbody');

      for (const dayId of daysOfWeek) {
        const dayClasses = scheduleData[dayId];
        let isFirstClassOfDay = true;

        if (dayClasses.length === 0 || (dayClasses.length === 1 && dayClasses[0].tagClass === 'no-class')) {
            const tr = document.createElement('tr');
            tr.classList.add('no-class-row');
            tr.classList.add('first-class-of-day');

            const tdDay = document.createElement('td');
            tdDay.rowSpan = 1;
            tdDay.classList.add('table-day');
            tdDay.textContent = dayId.charAt(0).toUpperCase() + dayId.slice(1);
            tr.appendChild(tdDay);

            const tdSubject = document.createElement('td');
            tdSubject.colSpan = 4; // Span across subject, time, room, instructor
            tdSubject.textContent = "No Classes Scheduled";
            tr.appendChild(tdSubject);

            const tdTag = document.createElement('td');
            const tagSpan = document.createElement('span');
            tagSpan.classList.add('table-tag', 'no-class');
            tagSpan.textContent = "Free Day";
            tdTag.appendChild(tagSpan);
            tr.appendChild(tdTag);
            tbody.appendChild(tr);

        } else {
            dayClasses.forEach(classInfo => {
                const tr = document.createElement('tr');

                if (isFirstClassOfDay) {
                    tr.classList.add('first-class-of-day'); // Add this class for border
                    const tdDay = document.createElement('td');
                    tdDay.rowSpan = dayClasses.length; // Span rows for the day
                    tdDay.classList.add('table-day');
                    tdDay.textContent = dayId.charAt(0).toUpperCase() + dayId.slice(1);
                    tr.appendChild(tdDay);
                    isFirstClassOfDay = false;
                }

                const tdSubject = document.createElement('td');
                tdSubject.classList.add('table-subject');
                tdSubject.textContent = classInfo.subject;
                tr.appendChild(tdSubject);

                const tdTime = document.createElement('td');
                tdTime.classList.add('table-time');
                tdTime.textContent = classInfo.time;
                tr.appendChild(tdTime);

                const tdRoom = document.createElement('td');
                tdRoom.classList.add('table-room');
                tdRoom.textContent = classInfo.room;
                tr.appendChild(tdRoom);

                const tdInstructor = document.createElement('td');
                tdInstructor.classList.add('table-instructor');
                tdInstructor.textContent = classInfo.instructor || 'N/A';
                tr.appendChild(tdInstructor);

                const tdTag = document.createElement('td');
                const tagSpan = document.createElement('span');
                tagSpan.classList.add('table-tag', classInfo.tagClass);
                tagSpan.textContent = classInfo.tag;
                tdTag.appendChild(tagSpan);
                tr.appendChild(tdTag);

                tbody.appendChild(tr);
            });
        }
      }

      table.appendChild(tbody);
      compactContainer.appendChild(table);
    }

    document.addEventListener('DOMContentLoaded', () => {
      // Set the academic year dynamically
      const currentYear = new Date().getFullYear();
      const nextYear = currentYear + 1;
      const h1Element = document.querySelector('h1');
      h1Element.innerHTML = `BSIT-AIT 1-2 Schedule<br>1st Semester<br>A.Y. ${currentYear}–${nextYear}`;


      const layoutToggleButton = document.getElementById('layoutToggle');
      const expandedViewContainer = document.getElementById('expanded-view-container');
      const compactViewContainer = document.getElementById('compact-view-container');
      let isCompactView = false; // Initial state: expanded view (one day per row)

      // Render the initial expanded view
      renderExpandedView();
      renderCompactView(); // Render once to have it ready, hidden

      // Set current day and open it
      const today = new Date();
      const currentDayIndex = today.getDay();
      const currentDayId = daysOfWeek[currentDayIndex];
      const currentDayElement = document.getElementById(currentDayId);

      if (currentDayElement) {
        currentDayElement.classList.add('current-day');
        currentDayElement.setAttribute('open', ''); // Open the current day's details

        // Add an anchor target for the "Go to Current Day" button
        const anchor = document.createElement('a');
        anchor.id = 'current-day-anchor';
        anchor.style.visibility = 'hidden';
        anchor.style.position = 'absolute';
        anchor.style.top = '0';
        currentDayElement.prepend(anchor);
      }

      // Scroll progress bar
      const progressBar = document.getElementById('progressBar');
      window.addEventListener('scroll', () => {
        const totalHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = (window.scrollY / totalHeight) * 100;
        progressBar.style.width = scrolled + '%';
      });

      // Fixed navigation bar scroll behavior
      const scrollToTopLink = document.querySelector('.fixed-nav-bar.top .nav-content');

      scrollToTopLink.addEventListener('click', (e) => {
        e.preventDefault();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      // Layout Toggle Logic
      layoutToggleButton.addEventListener('click', () => {
        isCompactView = !isCompactView;
        document.body.classList.toggle('compact-view', isCompactView);

        if (isCompactView) {
          // Switch to Compact (Table) View
          layoutToggleButton.querySelector('.button-text').textContent = 'Expanded View';
          layoutToggleButton.querySelector('svg').innerHTML = '<path d="M4 11h8V4H4v7zm0 9h8v-7H4v7zm9 0h7v-7h-7v7zm0-16v7h7V4h-7z"/>'; // Grid icon
          expandedViewContainer.style.display = 'none'; // Hide the expanded view
          expandedViewContainer.style.opacity = '0';
          compactViewContainer.style.display = 'block'; // Show the compact table view
          setTimeout(() => compactViewContainer.style.opacity = '1', 10); // Fade in
        } else {
          // Switch back to Expanded (Details) View
          layoutToggleButton.querySelector('.button-text').textContent = 'Compact View';
          layoutToggleButton.querySelector('svg').innerHTML = '<path d="M2 13h20v-2H2v2zm0 4h20v-2H2v2zm0-8h20V7H2v2zm0-4h20V3H2v2z"/>'; // List icon
          compactViewContainer.style.display = 'none'; // Hide the compact table view
          compactViewContainer.style.opacity = '0';
          expandedViewContainer.style.display = 'grid'; // Show the expanded view (use 'grid' as it's a grid container)
          setTimeout(() => expandedViewContainer.style.opacity = '1', 10); // Fade in

          // Ensure all details are closed except the current day when switching back to expanded view
          document.querySelectorAll('details.day').forEach(day => {
            if (day.id !== currentDayId) { // Only close if it's not the current day
              day.removeAttribute('open');
            } else {
              day.setAttribute('open', ''); // Ensure current day stays open
            }
          });
          // Re-highlight the current day if it exists and was previously marked
          if (currentDayElement) {
              currentDayElement.classList.add('current-day');
          }
        }
        window.scrollTo({ top: 0, behavior: 'smooth' }); // Scroll to top when switching views
      });
    });
  </script>
</body>
</html>